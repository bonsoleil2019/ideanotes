# AVM家族メモ - 実装タスク一覧

*2025-07-14 - 17分実装チャレンジ用タスク分解*

## 📋 実装タスク概要

家族メモ機能を段階的に実装するためのタスク一覧。
各タスクは独立して実装可能で、優先順位に従って進められる。

## 🎯 Phase 1: 基盤整備（推定: 45分）

### Task 1.1: DynamoDBテーブル拡張
```
[ ] Memosテーブルに family-timestamp-index GSI追加
[ ] Usersテーブル作成
[ ] InviteCodesテーブル作成（TTL設定含む）
[ ] ※Familiesテーブルは不要（買い物メモなので）
```

### Task 1.2: 既存データ移行
```
[ ] 既存メモに familyId = userId を設定するスクリプト作成
[ ] 既存ユーザーのUserレコード初期化
[ ] 移行スクリプトの実行
```

### Task 1.3: Lambda関数更新（基本）
```
[ ] メモ作成時に familyId を設定
[ ] メモ取得を familyId ベースに変更
[ ] ユーザー情報取得API追加
```

## 🚀 Phase 2: 認証・ユーザー管理（推定: 30分）

### Task 2.1: Google SSO実装
```
[ ] Google OAuth設定
[ ] ログインエンドポイント実装
[ ] JWTトークン発行処理
[ ] ユーザー作成・更新処理
```

### Task 2.2: 認証統合
```
[ ] API Gateway認証設定
[ ] Lambda認証ミドルウェア
[ ] Alexa/Google統一処理
```

## 👨‍👩‍👧 Phase 3: 家族機能コア（推定: 17分 ← ここが本命！）

### Task 3.1: 家族管理API
```typescript
// 実装するエンドポイント
POST   /invite-codes      // 招待コード生成
POST   /join-family       // 家族に参加
POST   /leave-family      // 家族から退出
POST   /transfer-owner    // 筆頭者移譲
GET    /family-members    // メンバー一覧
```

### Task 3.2: メモ表示更新
```
[ ] familyId でメモを取得する処理
[ ] 作成者名の表示追加
[ ] 完了機能の実装
```

## 🎨 Phase 4: Web UI対応（推定: 60分）

### Task 4.1: 認証UI
```
[ ] Googleログインボタン実装
[ ] ログイン状態管理
[ ] 初回ユーザーフロー
```

### Task 4.2: 家族管理UI
```
[ ] QRコード生成・表示
[ ] 招待コード入力画面
[ ] メンバー一覧表示
[ ] 退出・移譲ボタン
```

### Task 4.3: メモUI改善
```
[ ] 作成者表示
[ ] 完了チェックボックス
[ ] 家族/個人切り替え（将来用）
```

## 🔊 Phase 5: Alexa対応（推定: 30分）

### Task 5.1: 音声招待
```
[ ] 招待コード受付インテント追加
[ ] 4桁コード音声認識最適化
[ ] 参加完了レスポンス
```

### Task 5.2: 家族モード対応
```
[ ] 「家族のメモ」フレーズ対応
[ ] メンバー名読み上げ
[ ] 完了状態の音声フィードバック
```

## 📊 実装優先順位

### 🥇 最優先（MVP）
1. Phase 1.1: テーブル作成
2. Phase 3.1: 家族管理API（コア機能）
3. Phase 3.2: メモ表示更新

### 🥈 高優先
4. Phase 2.1: Google SSO
5. Phase 4.2: 家族管理UI

### 🥉 中優先
6. Phase 4.1: 認証UI
7. Phase 5.1: Alexa音声招待

### 📍 低優先
8. Phase 1.2: データ移行（新規ユーザーのみでも可）
9. Phase 4.3: UI改善
10. Phase 5.2: Alexa家族モード

## ⚡ 17分チャレンジ対象

**Phase 3: 家族機能コア** が17分実装の対象！

理由：
- 仕様が完全に固まっている
- SQL文まで設計済み
- 判断が必要な箇所ゼロ
- 既存APIの拡張で済む

```bash
# 17分の内訳
5分: 家族管理エンドポイント実装
5分: メモ取得ロジック更新  
5分: テスト実行
2分: デプロイ
```

## 🎬 まとめ

このタスク分解により、各開発セッションで迷いなく実装できる。
特にPhase 3は仕様書の完成度により、**本当に17分で実装可能**。

---

*528%効率化の再現を目指して*